{% extends "base.html" %}

{% block content %}
<div class="hero">
    <h1>üßµ –°—ä–∑–¥–∞–π —Å–≤–æ—è QR –∫–æ–¥</h1>
    <p>–ü—Ä–µ–≤—Ä–∞—Ç–∏ –≤—Å—è–∫–∞ –≤—Ä—ä–∑–∫–∞ –≤ –∫—Ä–∞—Å–∏–≤–æ —Ü–∏—Ñ—Ä–æ–≤–æ –∏–∑–∫—É—Å—Ç–≤–æ</p>
</div>

{% if about_page %}
<!-- About Page Content -->
<div class="about-section">
    <div class="about-card">
        <h2>üé® –û—Ç–Ω–æ—Å–Ω–æ QRWeaver</h2>
        <p>QRWeaver –µ –∏–Ω–æ–≤–∞—Ç–∏–≤–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ QR –∫–æ–¥–æ–≤–µ —Å —É–Ω–∏–∫–∞–ª–Ω–∏ —Å—Ç–∏–ª–æ–≤–µ –∏ –¥–∏–∑–∞–π–Ω–∏.</p>
        
        <div class="features">
            <div class="feature">
                <h3>üöÄ –ë—ä—Ä–∑–æ –∏ –õ–µ—Å–Ω–æ</h3>
                <p>–ì–µ–Ω–µ—Ä–∏—Ä–∞–π QR –∫–æ–¥–æ–≤–µ –∑–∞ —Å–µ–∫—É–Ω–¥–∏ —Å –∏–Ω—Ç—É–∏—Ç–∏–≤–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.</p>
            </div>
            <div class="feature">
                <h3>üé® –°—Ç–∏–ª–æ–≤–µ –∑–∞ –í—Å–µ–∫–∏</h3>
                <p>–ò–∑–±–∏—Ä–∞–π –æ—Ç —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–∏ –¥–∏–∑–∞–π–Ω–∏ - –æ—Ç –º–æ–¥–µ—Ä–Ω–∏ –¥–æ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∏.</p>
            </div>
            <div class="feature">
                <h3>üì± –û–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–æ</h3>
                <p>–ü–µ—Ä—Ñ–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∏ –Ω–∞ –≤—Å–∏—á–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ - —Ç–µ–ª–µ—Ñ–æ–Ω, —Ç–∞–±–ª–µ—Ç, –∫–æ–º–ø—é—Ç—ä—Ä.</p>
            </div>
        </div>
    </div>
</div>

{% else %}
<!-- Main QR Generator Content -->
<div class="generator-container">
    <div class="generator-form">
        <form method="POST" action="{{ url_for('generate_qr') }}" class="qr-form">
            <div class="form-group">
                <label for="qr_data" class="form-label">
                    üìù –í—ä–≤–µ–¥–µ—Ç–µ –¥–∞–Ω–Ω–∏ –∑–∞ QR –∫–æ–¥–∞:
                </label>
                <textarea 
                    id="qr_data" 
                    name="qr_data" 
                    class="form-textarea" 
                    placeholder="https://example.com –∏–ª–∏ —Ç–µ–∫—Å—Ç –∑–∞ –∫–æ–¥–∏—Ä–∞–Ω–µ..."
                    rows="4"
                    required
                >{% if qr_info %}{{ qr_info.data }}{% endif %}</textarea>
                <small class="form-help">–ü–æ–¥–¥—ä—Ä–∂–∞–º–µ URL –∞–¥—Ä–µ—Å–∏, —Ç–µ–∫—Å—Ç, –∫–æ–Ω—Ç–∞–∫—Ç–∏ –∏ –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏!</small>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="style" class="form-label">üé® –°—Ç–∏–ª:</label>
                    <select id="style" name="style" class="form-select">
                        {% for style in styles %}
                            <option value="{{ style }}" 
                                {% if qr_info and qr_info.style == style %}selected{% endif %}>
                                {{ style|title }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label for="size" class="form-label">üìè –†–∞–∑–º–µ—Ä:</label>
                    <select id="size" name="size" class="form-select">
                        <option value="200" {% if qr_info and qr_info.size == 200 %}selected{% endif %}>–ú–∞–ª—ä–∫ (200px)</option>
                        <option value="300" {% if not qr_info or qr_info.size == 300 %}selected{% endif %}>–°—Ä–µ–¥–µ–Ω (300px)</option>
                        <option value="400" {% if qr_info and qr_info.size == 400 %}selected{% endif %}>–ì–æ–ª—è–º (400px)</option>
                    </select>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">
                üßµ –ì–µ–Ω–µ—Ä–∏—Ä–∞–π QR –∫–æ–¥
            </button>
        </form>
    </div>

    {% if qr_image %}
    <!-- QR Code Result -->
    <div class="result-container">
        <div class="result-card">
            <h3>‚úÖ –¢–≤–æ—è—Ç QR –∫–æ–¥ –µ –≥–æ—Ç–æ–≤!</h3>
            
            <div class="qr-preview">
                <img src="data:image/png;base64,{{ qr_image }}" 
                     alt="–ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω QR –∫–æ–¥" 
                     class="qr-image">
            </div>

            <div class="qr-info">
                <p><strong>–°—Ç–∏–ª:</strong> {{ qr_info.style|title }}</p>
                <p><strong>–†–∞–∑–º–µ—Ä:</strong> {{ qr_info.size }}px</p>
                <p><strong>–ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω –Ω–∞:</strong> {{ qr_info.timestamp }}</p>
            </div>

            <!-- Download Form -->
            <form method="POST" action="{{ url_for('download_qr') }}" class="download-form">
                <input type="hidden" name="download_data" value="{{ qr_info.data }}">
                <input type="hidden" name="download_style" value="{{ qr_info.style }}">
                <input type="hidden" name="download_size" value="{{ qr_info.size }}">
                
                <button type="submit" class="btn btn-download">
                    üíæ –ò–∑—Ç–µ–≥–ª–∏ QR –∫–æ–¥–∞
                </button>
            </form>
        </div>
    </div>
    {% endif %}

    <!-- Quick Examples -->
    <div class="examples-section">
        <h3>‚ö° –ë—ä—Ä–∑–∏ –ø—Ä–∏–º–µ—Ä–∏:</h3>
        <div class="examples-grid">
            <button class="example-btn" data-example="https://github.com">
                üåê GitHub
            </button>
            <button class="example-btn" data-example="https://instagram.com">
                üì∑ Instagram
            </button>
            <button class="example-btn" data-example="Hello from QRWeaver!">
                üìù –¢–µ–∫—Å—Ç
            </button>
            <button class="example-btn" data-example="mailto:example@email.com">
                ‚úâÔ∏è Email
            </button>
        </div>
    </div>
</div>
{% endif %}

<!-- Error Display -->
{% if error %}
<div class="error-container">
    <div class="error-card">
        <h3>‚ùå –ì—Ä–µ—à–∫–∞</h3>
        <p>{{ error }}</p>
        <a href="{{ url_for('index') }}" class="btn btn-primary">–í—ä—Ä–Ω–∏ —Å–µ –∫—ä–º –Ω–∞—á–∞–ª–æ—Ç–æ</a>
    </div>
</div>
{% endif %}
{% endblock %}
