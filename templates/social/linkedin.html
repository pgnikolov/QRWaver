{% extends "base.html" %}

{% block title %}LinkedIn QR Generator - QRWeaver{% endblock %}

{% block content %}
<div class="social-generator">
    <div class="platform-header">
        <div class="platform-icon">üíº</div>
        <h1>LinkedIn QR –∫–æ–¥</h1>
        <p>–°—ä–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω QR –∫–æ–¥ –∑–∞ –≤–∞—à–∏—è LinkedIn –ø—Ä–æ—Ñ–∏–ª</p>
    </div>

    <div class="generator-container">
        <form method="POST" class="qr-form" id="linkedinForm">
            <div class="form-section">
                <h3>üìù –û—Å–Ω–æ–≤–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                
                <div class="form-group">
                    <label for="profile_url" class="form-label">LinkedIn –ø—Ä–æ—Ñ–∏–ª URL:</label>
                    <input type="url" id="profile_url" name="profile_url" 
                           class="form-input" 
                           placeholder="https://linkedin.com/in/username –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ username"
                           value="{{ request.form.profile_url or '' }}" required>
                    <small class="form-help">–ú–æ–∂–µ –¥–∞ –≤—ä–≤–µ–¥–µ—Ç–µ –ø—ä–ª–µ–Ω URL –∏–ª–∏ —Å–∞–º–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ</small>
                </div>

                <div class="form-group">
                    <label for="display_name" class="form-label">–ò–º–µ –∑–∞ –ø–æ–∫–∞–∑–≤–∞–Ω–µ:</label>
                    <input type="text" id="display_name" name="display_name" 
                           class="form-input" 
                           placeholder="–í–∞—à–µ—Ç–æ –∏–º–µ"
                           value="{{ request.form.display_name or '' }}" required>
                </div>
            </div>

            <div class="form-section">
                <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                
                <div class="form-options">
                    <label class="checkbox-option">
                        <input type="checkbox" name="use_shortlink" id="use_shortlink" checked>
                        <span class="checkmark"></span>
                        <span class="option-text">–ò–∑–ø–æ–ª–∑–≤–∞–π shortlink (linkedin.com/in/username)</span>
                    </label>

                    <label class="checkbox-option">
                        <input type="checkbox" name="rounded_corners" id="rounded_corners">
                        <span class="checkmark"></span>
                        <span class="option-text">–ó–∞–∫—Ä—ä–≥–ª–µ–Ω–∏ —ä–≥–ª–∏</span>
                    </label>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="corner_radius" class="form-label">–†–∞–¥–∏—É—Å –Ω–∞ —ä–≥–ª–∏—Ç–µ:</label>
                        <input type="number" id="corner_radius" name="corner_radius" 
                               class="form-input" value="40" min="0" max="100">
                    </div>

                    <div class="form-group">
                        <label for="qr_size" class="form-label">–†–∞–∑–º–µ—Ä –Ω–∞ QR –∫–æ–¥–∞:</label>
                        <select id="qr_size" name="qr_size" class="form-select">
                            <option value="250">–ú–∞–ª—ä–∫ (250px)</option>
                            <option value="300" selected>–°—Ä–µ–¥–µ–Ω (300px)</option>
                            <option value="400">–ì–æ–ª—è–º (400px)</option>
                        </select>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-linkedin btn-large">
                üíº –ì–µ–Ω–µ—Ä–∏—Ä–∞–π LinkedIn QR –∫–æ–¥
            </button>
        </form>

        {% if success %}
        <div class="qr-result">
            <div class="result-header">
                <h3>‚úÖ –í–∞—à–∏—è—Ç LinkedIn QR –∫–æ–¥ –µ –≥–æ—Ç–æ–≤!</h3>
            </div>
            
            <div class="qr-preview">
                <img src="data:image/png;base64,{{ qr_image }}" 
                     alt="LinkedIn QR Code" 
                     class="qr-image">
            </div>

            <div class="qr-info">
                <div class="info-item">
                    <strong>Shortlink:</strong> 
                    <span class="shortlink">{{ shortlink }}</span>
                </div>
                <div class="info-item">
                    <strong>–ü—ä–ª–µ–Ω URL:</strong> 
                    <span class="full-url">{{ full_url }}</span>
                </div>
            </div>

            <form method="POST" action="{{ url_for('main.download_qr', platform='linkedin') }}" class="download-form">
                <input type="hidden" name="profile_url" value="{{ request.form.profile_url }}">
                <input type="hidden" name="display_name" value="{{ request.form.display_name }}">
                <input type="hidden" name="use_shortlink" value="{{ 'true' if request.form.use_shortlink else 'false' }}">
                <input type="hidden" name="rounded_corners" value="{{ 'true' if request.form.rounded_corners else 'false' }}">
                <input type="hidden" name="corner_radius" value="{{ request.form.corner_radius or '40' }}">
                <input type="hidden" name="qr_size" value="{{ request.form.qr_size or '300' }}">
                
                <div class="action-buttons">
                    <button type="submit" class="btn btn-download">
                        üíæ –ò–∑—Ç–µ–≥–ª–∏ QR –∫–æ–¥–∞
                    </button>
                    <button type="button" onclick="shareQR()" class="btn btn-share">
                        üì§ –°–ø–æ–¥–µ–ª–∏
                    </button>
                </div>
            </form>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function shareQR() {
    if (navigator.share) {
        navigator.share({
            title: '–ú–æ—è—Ç LinkedIn QR –∫–æ–¥',
            text: '–°–∫–∞–Ω–∏—Ä–∞–π —Ç–æ–∑–∏ QR –∫–æ–¥ –∑–∞ –¥–∞ —Å–µ —Å–≤—ä—Ä–∂–µ—à —Å –º–µ–Ω –≤ LinkedIn!',
            url: '{{ full_url }}'
        });
    } else {
        alert('–§—É–Ω–∫—Ü–∏—è—Ç–∞ –∑–∞ —Å–ø–æ–¥–µ–ª—è–Ω–µ –Ω–µ —Å–µ –ø–æ–¥–¥—ä—Ä–∂–∞ –æ—Ç –≤–∞—à–∏—è –±—Ä–∞—É–∑—ä—Ä. –ú–æ–∂–µ—Ç–µ –¥–∞ –∏–∑—Ç–µ–≥–ª–∏—Ç–µ QR –∫–æ–¥–∞.');
    }
}

// Quick examples
const linkedinExamples = [
    'https://linkedin.com/in/john-doe',
    'john-doe',
    'linkedin.com/in/john-doe'
];

document.addEventListener('DOMContentLoaded', function() {
    const profileUrlInput = document.getElementById('profile_url');
    
    // Add example buttons
    const examplesContainer = document.createElement('div');
    examplesContainer.className = 'quick-examples';
    examplesContainer.innerHTML = '<h4>‚ö° –ë—ä—Ä–∑–∏ –ø—Ä–∏–º–µ—Ä–∏:</h4><div class="example-buttons"></div>';
    
    profileUrlInput.parentNode.appendChild(examplesContainer);
    
    const examplesDiv = examplesContainer.querySelector('.example-buttons');
    linkedinExamples.forEach(example => {
        const button = document.createElement('button');
        button.type = 'button';
        button.className = 'example-btn';
        button.textContent = example;
        button.addEventListener('click', () => {
            profileUrlInput.value = example;
        });
        examplesDiv.appendChild(button);
    });
});
</script>
{% endblock %}
